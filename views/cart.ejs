<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/cart.css">
    <link rel="stylesheet" href="/stylesheets/navBar.css">
</head>

<body>


    <%- include('navBar') %>

        <h3>Shopping Cart</h3>
        <div class="cart-layout">

            <div class="cart-container">
                <% if(products.length===0){ %>
                    <a href="/">Add Products</a>
                    <%}%>
                        <% products.forEach(product=> { %>
                            <div class="cart-item" id="<%=product.product._id %>">
                                <div class="checkbox-container">
                                    <input type="checkbox">
                                </div>
                                <div class="product-image">
                                    <img src="<%= product.product.image %>"
                                        alt="<%= product.product.productName %> Image">
                                </div>
                                <div class="product-details">
                                    <h4>
                                        <%= product.product.productName %>
                                    </h4>
                                    <p>
                                        <%= product.product.description %>
                                    </p>
                                    <div class="quantity-delete">
                                        <div class="quantity-control">
                                            <button class="decrease-btn">-</button>
                                            <input type="number" value="<%= product.quantity %>" min="1" readonly>
                                            <button class="increase-btn">+</button>
                                        </div>
                                        <div class="delete-button">
                                            <button><i class="fas fa-trash-alt"></i> Delete</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-price">
                                    <span class="title">Price</span>
                                    <span>$<%= product.product.price %></span>
                                </div>
                                <div class="total-price">
                                    <span class="title">Total Price</span>
                                    <span class="totalPrice">$<%= (product.product.price * product.quantity).toFixed(2)
                                            %>
                                    </span>
                                </div>
                            </div>

                            <% }); %>

            </div>

            <% if(products.length !=0){ %>
                <div class="subtotal-card">
                    <h4>Order Summary</h4>
                    <div class="subtotal">
                        <span>Subtotal: $<span id="subTotal"></span></span>
                    </div>
                    <a href="/users/order-page"><button class="buy-button">Proceed to Buy</button></a>
                </div>
                <% } %>

        </div>

        <script src="/javascripts/userCart.js"></script>

</body>

</html>